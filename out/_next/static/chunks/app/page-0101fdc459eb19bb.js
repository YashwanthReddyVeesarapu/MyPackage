(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4530:function(e,t,a){Promise.resolve().then(a.bind(a,1295))},1295:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var n=a(7437);a(5643);var l=a(2265),o=a(817),r=a(8389),i=a(2653),s=a(33),c=a(5873),d=a(8469),u=a(7079),h=a(789),p=a(7668),f=a(5631),m=a(8768),x=a(4719),v=a(1344),g=a(4202),j=a(8766),y=a(3564),Z=a(5926),I=a(8909),S=a(6691),b=a.n(S),k=a(1428),_=a(4747),A=a(4033),D=a(3085),C=a(3198),N=a(7704);let w=(0,I.ZP)(y.Z)(e=>{let{theme:t}=e;return{["&.".concat(Z.Z.alternativeLabel)]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},["&.".concat(Z.Z.active)]:{["& .".concat(Z.Z.line)]:{borderColor:"#784af4"}},["&.".concat(Z.Z.completed)]:{["& .".concat(Z.Z.line)]:{borderColor:"#784af4"}},["& .".concat(Z.Z.line)]:{borderColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderTopWidth:7,borderRadius:1,marginTop:"22px"}}}),E=(0,I.ZP)("div")(e=>{let{theme:t,ownerState:a}=e;return{color:"dark"===t.palette.mode?t.palette.grey[700]:"#eaeaf0",display:"flex",height:25,alignItems:"center",...a.active&&{color:"#784af4"},"& .QontoStepIcon-completedIcon":{color:"#784af4",zIndex:1,fontSize:25},"& .QontoStepIcon-circle":{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}}});function QontoStepIcon(e){let{active:t,completed:a,className:l}=e;return(0,n.jsx)(E,{ownerState:{active:t},className:l,children:a?(0,n.jsx)(x.Z,{className:"QontoStepIcon-completedIcon"}):(0,n.jsx)("div",{className:"QontoStepIcon-circle"})})}function Home(){let[e,t]=(0,l.useState)(""),[a,x]=(0,l.useState)("All"),[y,Z]=(0,l.useState)([]),[I,S]=(0,l.useState)([]),E=(0,C.v9)(e=>e),T=(0,D.v0)(),L=(0,C.I0)(),z=(0,_._)(),U=["Waiting for details","Shipped","Out for delivery","Delivered"],fetchItemsData=async()=>{let e=E.user.token,t=E.user.email;console.log("FETCHING");try{let a=await k.b.get("/fetch-gmail-data",{headers:{Authorization:"Bearer ".concat(e),UserId:t}});L((0,N.a)(a.data))}catch(e){console.log(e),alert("Login token expired"),T.signOut()}};return((0,l.useEffect)(()=>{var e,t,a,n;console.log(E),(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.items)&&(null==E?void 0:null===(t=E.data)||void 0===t?void 0:t.items.length)>0&&(null==E?void 0:null===(a=E.data)||void 0===a?void 0:a.items)!=I&&S(null==E?void 0:null===(n=E.data)||void 0===n?void 0:n.items)},[E]),(0,l.useEffect)(()=>{if(E.data.last_modified){let e=Date.now(),t=e-Date.parse(E.data.last_modified);if(console.log(t),t<6e4)return}I.length<1&&fetchItemsData()},[]),(0,l.useEffect)(()=>{I&&!(I.length<0)&&("All"===a?Z(I):Z(I.filter(e=>e.status===a)))},[I,a]),z.user)?(0,n.jsxs)("div",{className:"home",children:[(0,n.jsxs)(o.Z,{value:a,exclusive:!0,onChange:(e,t)=>{x(t)},style:{background:"#784af4",color:"white",display:"flex",width:"100%"},children:[[{value:"All",name:"All"},{value:"Shipped",name:"Shipped"},{value:"Out for delivery",name:"Out for delivery"},{value:"Delivered",name:"Delivered"}].map((e,t)=>(0,n.jsx)(r.Z,{style:{color:"white"},value:e.value,children:e.name},t)),(0,n.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"flex-end"},children:(0,n.jsx)(i.Z,{style:{color:"white"},onClick:fetchItemsData,children:(0,n.jsx)(j.Z,{})})})]}),(null==y?void 0:y.length)>=1?y.map((e,t)=>(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(c.Z,{expandIcon:(0,n.jsx)(v.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:e.image?(0,n.jsx)(b(),{width:50,height:50,src:e.image,alt:"Live from space album cover"}):(0,n.jsx)(g.Z,{style:{fontSize:"5em"}})}),(0,n.jsxs)(d.Z,{sx:{flex:"1",width:"100%",display:"flex",flexDirection:"column",textAlign:"center"},children:[(0,n.jsx)(u.Z,{variant:"h2",style:{fontSize:"2em",marginBottom:"20px",fontWeight:"bold"},children:e.company_name}),(0,n.jsx)(h.Z,{alternativeLabel:!0,activeStep:U.findIndex(t=>t==e.status),connector:(0,n.jsx)(w,{}),children:U.map(e=>(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(u.Z,{children:e}),(0,n.jsx)(f.Z,{StepIconComponent:QontoStepIcon})]},e))}),(0,n.jsx)(u.Z,{variant:"subtitle1",color:"text.secondary",component:"div",children:e.last_location})]})]}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"column",children:[(0,n.jsx)("span",{children:"Tracking ID:"}),e.tracking_number?(0,n.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:e.tracking_link,children:e.tracking_number}):"N/A",(0,n.jsx)("span",{children:"Last updated:"})," ",e.last_modified?e.last_modified:"N/A"]}),(0,n.jsxs)("div",{className:"column",children:[(0,n.jsx)("span",{children:"Carrier:"})," ",e.carrier?e.carrier:"N/A",(0,n.jsx)("span",{children:"Last Location: "})," ",e.last_location?e.last_location:"N/A"]})]})})]},t)):(0,n.jsx)(s.Z,{children:(0,n.jsx)(c.Z,{"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,n.jsx)(u.Z,{style:{margin:"50px",fontSize:"2em"},children:"No Data"})})})]}):(0,A.redirect)("/login")}},4747:function(e,t,a){"use strict";a.d(t,{H:function(){return AuthContextProvider},_:function(){return UserAuth}});var n=a(7437),l=a(2265),o=a(4931),r=a(3085);let i=(0,l.createContext)("auth"),AuthContextProvider=e=>{let{children:t}=e,[a,s]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(!0);return((0,r.Aj)(o.I,e=>{s(e),h(!1)}),u)?(0,n.jsx)("div",{className:"lds-circle",children:(0,n.jsx)("div",{})}):(0,n.jsx)(i.Provider,{value:{user:a,access:c,setAccess:d,setLoading:h},children:t})},UserAuth=()=>(0,l.useContext)(i)},1428:function(e,t,a){"use strict";a.d(t,{b:function(){return l}});var n=a(2173);let l=n.Z.create({baseURL:"https://mypackage-789471c5eba8.herokuapp.com/"})},4931:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var n=a(994),l=a(3085);let o=(0,n.ZF)({apiKey:"AIzaSyBrh0gfeGN7xJA9W3BJpbDYi6hd2kgT4jA",authDomain:"mypackage.redsols.us",projectId:"my-package-solution",storageBucket:"my-package-solution.appspot.com",messagingSenderId:"564439130795",appId:"1:564439130795:web:2f74639f5fb3bf8c710dee",measurementId:"G-CK1Y5RH620"}),r=(0,l.v0)(o)},7704:function(e,t,a){"use strict";a.d(t,{M:function(){return setUserData},a:function(){return setData}});let setData=e=>({type:"SET_DATA",payload:e}),setUserData=e=>({type:"SET_USER_DATA",payload:e})},5643:function(){}},function(e){e.O(0,[565,923,722,402,198,636,277,971,864,744],function(){return e(e.s=4530)}),_N_E=e.O()}]);