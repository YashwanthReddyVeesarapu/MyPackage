(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8874:function(e,t,a){Promise.resolve().then(a.bind(a,3439))},3439:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return page}});var r=a(7437),s=a(2265),n=a(4585),i=a(3085),l=a(4747),o=a(4033),u=a(2173),c=a(9050),d=a(853);let h="";h="http://127.0.0.1:8000/";let p=u.Z.create({baseURL:h});var f=a(3198);let setData=e=>({type:"SET_DATA",payload:e}),setUserData=e=>({type:"SET_USER_DATA",payload:e});var page=e=>{let[t,a]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),g=(0,f.I0)(),v=(0,i.v0)(),y=(0,l._)();if(y.user)return(0,o.redirect)("/profile");let fetchGmailData=async(e,t)=>{try{let a=await u.Z.get("http://127.0.0.1:8000/fetch-gmail-data",{headers:{Authorization:"Bearer ".concat(e),UserId:t}});return a.data}catch(e){console.error("Error fetching Gmail data:",e)}},handleSocial=async()=>{let e=new i.hJ;e.addScope("https://www.googleapis.com/auth/gmail.readonly");let t=await (0,i.rh)(v,e),a=i.hJ.credentialFromResult(t),r=null==a?void 0:a.accessToken,s=t.user.email;if(y.setAccess(r),r&&s){let e=await fetchGmailData(r,s);g(setData(e));let a={uid:t.user.uid,displayName:t.user.displayName,email:t.user.email,token:r};g(setUserData(a));let n=await p.post("/users",a);console.log(n)}else console.log("Something went wrong")};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Login is required to user our services"}),(0,r.jsxs)(n.Z,{children:["Login with Google",(0,r.jsx)(c.Z,{onClick:()=>handleSocial(),children:(0,r.jsx)(d.Z,{style:{fontSize:"50px"}})})]})]})}},4585:function(e,t,a){"use strict";var r=a(7437);a(5263),a(2265),t.Z=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"container",children:t})}},4747:function(e,t,a){"use strict";a.d(t,{H:function(){return AuthContextProvider},_:function(){return UserAuth}});var r=a(7437),s=a(2265),n=a(4931),i=a(3085);let l=(0,s.createContext)("auth"),AuthContextProvider=e=>{let{children:t}=e,[a,o]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0);return((0,i.Aj)(n.I,e=>{o(e),h(!1)}),d)?(0,r.jsx)("div",{className:"lds-circle",children:(0,r.jsx)("div",{})}):(0,r.jsx)(l.Provider,{value:{user:a,access:u,setAccess:c,setLoading:h},children:t})},UserAuth=()=>(0,s.useContext)(l)},4931:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var r=a(994),s=a(3085);let n=(0,r.ZF)({apiKey:"AIzaSyBrh0gfeGN7xJA9W3BJpbDYi6hd2kgT4jA",authDomain:"mypackage.redsols.us",projectId:"my-package-solution",storageBucket:"my-package-solution.appspot.com",messagingSenderId:"564439130795",appId:"1:564439130795:web:2f74639f5fb3bf8c710dee",measurementId:"G-CK1Y5RH620"}),i=(0,s.v0)(n)},5263:function(){}},function(e){e.O(0,[565,923,722,402,198,925,297,971,864,744],function(){return e(e.s=8874)}),_N_E=e.O()}]);